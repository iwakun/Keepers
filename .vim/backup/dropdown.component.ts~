import { Component, Input, Output, EventEmitter, ElementRef } from '@angular/core';

export class MacuDropdownValue {
    id:number;
    name:string;

    constructor(id:number, name:string) {
        this.id = id;
        this.name = name;
    }
}

@Component({
    selector: 'macu-dropdown',
    template: `
        <div class="macu-dropdown" [class.disabled]="disabled">
            <div class="macu-display" (click)="toggleShow()">
                {{ displayValue }}
            </div>
            <ul [hidden]="!isShown">
                <li
                    *ngFor="let value of values"
                    (click)="select(value)">
                    <a>{{ value.name }}</a>
                </li>
            </ul>
        </div>
    `
})
export class MacuDropdownComponent {
    displayValue:string;
    isShown:boolean;

    @Input()
    values:MacuDropdownValue[];

    @Input()
    disabled:boolean;

    @Input()
    value:number[];

    @Output()
    valueSet = new EventEmitter();

    constructor(private el:ElementRef) {
        this.displayValue = 'Hint Text';
        this.isShown = false;
    }

    select(value) {
        this.valueSet.emit(value);
        this.displayValue = value.name;
        this.isShown = false;
    }
    toggleShow() {
        if(!this.disabled) {
            this.isShown = !this.isShown;
        }
    }
}
